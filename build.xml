<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     Aug 8, 2010 10:37:58 AM                                                        

     processing.py    
     Write processing sketches in Python
                   
     jdf                                                                
     ====================================================================== -->
<project name="processing.py" default="gen-driver">
	<description>
            Write processing sketches in Python
    </description>

	<eclipse.convertPath resourcepath="processing.py" property="project" />

	<target name="gen-driver" description="Generate DriverImpl class">
		<java classpath="bin:thirdparty/processing/lib/core.jar"
		      classname="jycessing.build.DriverGenerator"
		      fork="true"
		      dir="${project}" />
		<eclipse.refreshLocal resource="processing.py" />
	</target>

	<target name="ziptool" description="Create processing tool">
		<eclipse.convertPath resourcepath="processing-app/userdir"
		                     property="userdir" />
		<delete dir="build" includeemptydirs="true" />
		<mkdir dir="build/PythonMode/tool" />
		<jar destfile="build/PythonMode/tool/PythonMode.jar">
			<fileset dir="bin" />
		</jar>
		<copy todir="build/PythonMode/tool"
		      file="thirdparty/jython/jython.jar" />
		<zip basedir="build" file="build/PythonMode.zip" />
		<copy todir="${userdir}/tools">
			<fileset dir="build" includes="PythonMode/**">
			</fileset>
		</copy>
		<eclipse.refreshLocal resource="processing.py" />
		<eclipse.refreshLocal resource="processing-app" />
	</target>

</project>
